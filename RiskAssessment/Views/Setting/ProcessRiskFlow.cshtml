@{

    ViewData["Title"] = "Process Risk Flows";
}

<div id="app">
    <div class="pt-3">
        <div class="row">
            <div class="col">
                <h3 class="pt-5 text-white"><i class="fa-solid fa-gears"></i> @ViewData["Title"] : CE</h3>
            </div>
            <div class="col-auto ml-auto ">
                <div class="form-group  pt-5">
                    <a class="btn btn-outline-warning text-white" asp-action="@SettingController.ActionProcessRiskControl"
                       asp-controller="@SettingController.Name"><i class="fa fa-arrow-circle-left"></i> Back</a>
                   
                </div>
            </div>
        </div>
    </div>


    <div class="row mt-2">
       
        <div class="col-12">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-body">
                            <div class="row">
                                <div class="col">
                                    <h4 class="pt-2">12AB</h4>
                                </div>
                                <div class="col-auto ml-auto">
                                    <a class="btn btn-primary" href="@Url.Action(SettingController.ActionFlowCreate,SettingController.Name)"><i class="fa-solid fa-circle-plus"></i> New Flow</a>
                                </div>
                            </div>

                            <hr />
                            <div class="row mt-3" v-for="(item,index) in flows"> 
                                <div class="col-12">
                                    <div class="card">
                                        <div class="card-body" style="border:1px solid rgba(0,0,0,.125);border-radius:10px">
                                            <div class="row">
                                                <div class="col">
                                                    <h5 class="header-title mt-1 mb-1 font-weight-bold">
                                                        {{item.flowName}}
                                                    </h5>
                                                    <ul class="list-group mt-3">
                                                        <a href="@Url.Action(SettingController.ActionRisksControl,SettingController.Name)" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" v-for="(pcs,pcs_index) in item.processes">
                                                            {{pcs.processName}}
                                                            <span class="badge badge-primary badge-pill">{{pcs.risksCount}}</span>
                                                        </a>
                                                     
                                                    </ul>
                                                </div>
                                                <div class="col-auto ml-auto">
                                                    <button class="btn btn-warning"><i class="fa-solid fa-pen-to-square"></i></button>
                                                    <button class="btn btn-danger"><i class="fa-solid fa-trash"></i></button>
                                                </div>
                                            </div>                                           
                                        </div>
                                    </div>
                                </div>
                            </div>
                           
                        </div>
                        <div class="card-footer">
                            @*<button class="btn btn-info">Save Draft</button>*@
                            <button class="btn btn-success">Save & Send to Reviewer</button>
                        </div>
                    </div>
                </div>
            </div>
           
        </div>
    </div>

</div>

@section Scripts{
    <partial name="_Vue2" />
    <script>
        new Vue({
            el: '#app',
            components: {
                
            },
            data: {
                flows:[
                    {
                        flowId: 1,
                        flowName: 'Assembly',
                        processes:[
                            {
                                processId: 1,
                                processName: 'Trimming',
                                risksCount:15
                            },
                            {
                                processId: 2,
                                processName: 'Hole Punching & Cleaning',
                                risksCount: 12
                            },
                            {
                                processId: 3,
                                processName: 'Riveting',
                                risksCount: 10
                            },
                            
                        ]
                    },
                    {
                        flowId: 2,
                        flowName: 'Issue PR',
                        processes: [
                            {
                                processId: 4,
                                processName: 'Issue PR',
                                risksCount: 0
                            },

                        ]
                    },
                    {
                        flowId: 3,
                        flowName: 'KPI Control',
                        processes: [
                            {
                                processId: 5,
                                processName: 'KPI Control',
                                risksCount: 0
                            },

                        ]
                    },
                ]



            },

        })

    </script>


   
}